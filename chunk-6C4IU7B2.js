import{b as y}from"./chunk-F7VIIAWX.js";import{B as m,V as c,W as g,v as f,x as b}from"./chunk-FCZ3UZ6C.js";import"./chunk-EQDQRRRY.js";var z=.5,B=10,q=0;function R(e,o,s,t,i,n){let d=f(e.options.collisions.absorb.speed*i.factor/B,q,t);e.size.value+=d*z,s.size.value-=d,t<=n&&(s.size.value=0,s.destroy())}function x(e,o,s,t){let i=e.getRadius(),n=o.getRadius();i===void 0&&n!==void 0?e.destroy():i!==void 0&&n===void 0?o.destroy():i!==void 0&&n!==void 0&&(i>=n?R(e,i,o,n,s,t):R(o,n,e,i,s,t))}var h=e=>{e.collisionMaxSpeed===void 0&&(e.collisionMaxSpeed=b(e.options.collisions.maxSpeed)),e.velocity.length>e.collisionMaxSpeed&&(e.velocity.length=e.collisionMaxSpeed)};function a(e,o){g(c(e),c(o)),h(e),h(o)}function v(e,o){!e.unbreakable&&!o.unbreakable&&a(e,o),e.getRadius()===void 0&&o.getRadius()!==void 0?e.destroy():e.getRadius()!==void 0&&o.getRadius()===void 0?o.destroy():e.getRadius()!==void 0&&o.getRadius()!==void 0&&(e.getRadius()>=o.getRadius()?o:e).destroy()}function M(e,o,s,t){switch(e.options.collisions.mode){case"absorb":{x(e,o,s,t);break}case"bounce":{a(e,o);break}case"destroy":{v(e,o);break}}}var w=2,P=class extends y{constructor(o){super(o)}clear(){}init(){}interact(o,s){if(o.destroyed||o.spawning)return;let t=this.container,i=o.getPosition(),n=o.getRadius(),d=t.particles.quadTree.queryCircle(i,n*w);for(let r of d){if(o===r||!r.options.collisions.enable||o.options.collisions.mode!==r.options.collisions.mode||r.destroyed||r.spawning)continue;let u=r.getPosition(),l=r.getRadius();if(Math.abs(Math.round(i.z)-Math.round(u.z))>n+l)continue;let S=m(i,u),k=n+l;S>k||M(o,r,s,t.retina.pixelRatio)}}isEnabled(o){return o.options.collisions.enable}reset(){}};export{P as Collider};
