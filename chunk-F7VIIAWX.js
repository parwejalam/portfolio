import{G as u,H as L,I as k,Y as C,Z as E,a as c,ba as P,fa as M,ga as z,m as _,u as D,x as a}from"./chunk-FCZ3UZ6C.js";import{f as p}from"./chunk-EQDQRRRY.js";var A=class{constructor(r){this.type="external",this.container=r}};var O=class{constructor(r){this.type="particles",this.container=r}};var g=class{constructor(){this._listeners=new Map}addEventListener(r,t){this.removeEventListener(r,t);let e=this._listeners.get(r);e||(e=[],this._listeners.set(r,e)),e.push(t)}dispatchEvent(r,t){this._listeners.get(r)?.forEach(o=>o(t))}hasEventListener(r){return!!this._listeners.get(r)}removeAllEventListeners(r){r?this._listeners.delete(r):this._listeners=new Map}removeEventListener(r,t){let e=this._listeners.get(r);if(!e)return;let o=e.length,i=e.indexOf(t);if(i<0)return;let n=1;o===n?this._listeners.delete(r):e.splice(i,n)}};function I(s,r,t,e=!1){return p(this,null,function*(){let o=r.get(s);return(!o||e)&&(o=yield Promise.all([...t.values()].map(i=>i(s))),r.set(s,o)),o})}function F(s){return p(this,null,function*(){let r=E(s.url,s.index);if(!r)return s.fallback;let t=yield fetch(r);return t.ok?yield t.json():(L().error(`${_} ${t.status} while retrieving config file`),s.fallback)})}var w=class{constructor(){this._configs=new Map,this._domArray=[],this._eventDispatcher=new g,this._initialized=!1,this.plugins=[],this._initializers={interactors:new Map,movers:new Map,updaters:new Map},this.interactors=new Map,this.movers=new Map,this.updaters=new Map,this.presets=new Map,this.effectDrawers=new Map,this.shapeDrawers=new Map,this.pathGenerators=new Map}get configs(){let r={};for(let[t,e]of this._configs)r[t]=e;return r}get version(){return"3.3.0"}addConfig(r){let t=r.key??r.name??"default";this._configs.set(t,r),this._eventDispatcher.dispatchEvent("configAdded",{data:{name:t,config:r}})}addEffect(r,t,e=!0){return p(this,null,function*(){C(r,o=>{this.getEffectDrawer(o)||this.effectDrawers.set(o,t)}),yield this.refresh(e)})}addEventListener(r,t){this._eventDispatcher.addEventListener(r,t)}addInteractor(r,t,e=!0){return p(this,null,function*(){this._initializers.interactors.set(r,t),yield this.refresh(e)})}addMover(r,t,e=!0){return p(this,null,function*(){this._initializers.movers.set(r,t),yield this.refresh(e)})}addParticleUpdater(r,t,e=!0){return p(this,null,function*(){this._initializers.updaters.set(r,t),yield this.refresh(e)})}addPathGenerator(r,t,e=!0){return p(this,null,function*(){this.getPathGenerator(r)||this.pathGenerators.set(r,t),yield this.refresh(e)})}addPlugin(r,t=!0){return p(this,null,function*(){this.getPlugin(r.id)||this.plugins.push(r),yield this.refresh(t)})}addPreset(r,t,e=!1,o=!0){return p(this,null,function*(){(e||!this.getPreset(r))&&this.presets.set(r,t),yield this.refresh(o)})}addShape(r,t,e=!0){return p(this,null,function*(){C(r,o=>{this.getShapeDrawer(o)||this.shapeDrawers.set(o,t)}),yield this.refresh(e)})}clearPlugins(r){this.updaters.delete(r),this.movers.delete(r),this.interactors.delete(r)}dispatchEvent(r,t){this._eventDispatcher.dispatchEvent(r,t)}dom(){return this._domArray}domItem(r){let t=this.dom(),e=t[r];if(!e||e.destroyed){t.splice(r,1);return}return e}getAvailablePlugins(r){return p(this,null,function*(){let t=new Map;for(let e of this.plugins)e.needsPlugin(r.actualOptions)&&t.set(e.id,yield e.getPlugin(r));return t})}getEffectDrawer(r){return this.effectDrawers.get(r)}getInteractors(r,t=!1){return p(this,null,function*(){return yield I(r,this.interactors,this._initializers.interactors,t)})}getMovers(r,t=!1){return p(this,null,function*(){return yield I(r,this.movers,this._initializers.movers,t)})}getPathGenerator(r){return this.pathGenerators.get(r)}getPlugin(r){return this.plugins.find(t=>t.id===r)}getPreset(r){return this.presets.get(r)}getShapeDrawer(r){return this.shapeDrawers.get(r)}getSupportedEffects(){return this.effectDrawers.keys()}getSupportedShapes(){return this.shapeDrawers.keys()}getUpdaters(r,t=!1){return p(this,null,function*(){return yield I(r,this.updaters,this._initializers.updaters,t)})}init(){this._initialized||(this._initialized=!0)}load(r){return p(this,null,function*(){let e=r.id??r.element?.id??`tsparticles${Math.floor(D()*1e4)}`,{index:o,url:i}=r,m=i?yield F({fallback:r.options,url:i,index:o}):r.options,n=r.element??document.getElementById(e);n||(n=document.createElement("div"),n.id=e,document.body.append(n));let R=E(m,o),d=this.dom(),l=d.findIndex(f=>f.id.description===e),b=0;if(l>=b){let f=this.domItem(l);f&&!f.destroyed&&(f.destroy(),d.splice(l,1))}let x;if(n.tagName.toLowerCase()==="canvas")x=n,x.dataset[c]="false";else{let f=n.getElementsByTagName("canvas");f.length?(x=f[0],x.dataset[c]="false"):(x=document.createElement("canvas"),x.dataset[c]="true",n.appendChild(x))}x.style.width||(x.style.width="100%"),x.style.height||(x.style.height="100%");let{Container:G}=yield import("./chunk-6NTZZSW2.js"),h=new G(this,e,R);return l>=b?d.splice(l,0,h):d.push(h),h.canvas.loadCanvas(x),yield h.start(),h})}loadOptions(r,t){for(let e of this.plugins)e.loadOptions(r,t)}loadParticlesOptions(r,t,...e){let o=this.updaters.get(r);if(o)for(let i of o)i.loadOptions?.(t,...e)}refresh(r=!0){return p(this,null,function*(){r&&(yield Promise.all(this.dom().map(t=>t.refresh())))})}removeEventListener(r,t){this._eventDispatcher.removeEventListener(r,t)}setOnClickHandler(r){let t=this.dom();if(!t.length)throw new Error(`${_} can only set click handlers after calling tsParticles.load()`);for(let e of t)e.addClickHandler(r)}};var v=class{constructor(){this.key="hsl",this.stringPrefix="hsl"}handleColor(r){let t=r.value,e=t.hsl??r.value;if(e.h!==void 0&&e.s!==void 0&&e.l!==void 0)return M(e)}handleRangeColor(r){let t=r.value,e=t.hsl??r.value;if(e.h!==void 0&&e.l!==void 0)return M({h:a(e.h),l:a(e.l),s:a(e.s)})}parseString(r){if(!r.startsWith("hsl"))return;let t=/hsla?\(\s*(\d+)\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(,\s*([\d.%]+)\s*)?\)/i,e=t.exec(r),o=4,i=1,m=10;return e?z({a:e.length>o?u(e[5]):i,h:parseInt(e[1],m),l:parseInt(e[3],m),s:parseInt(e[2],m)}):void 0}};var y=class{constructor(){this.key="rgb",this.stringPrefix="rgb"}handleColor(r){let t=r.value,e=t.rgb??r.value;if(e.r!==void 0)return e}handleRangeColor(r){let t=r.value,e=t.rgb??r.value;if(e.r!==void 0)return{r:a(e.r),g:a(e.g),b:a(e.b)}}parseString(r){if(!r.startsWith(this.stringPrefix))return;let t=/rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([\d.%]+)\s*)?\)/i,e=t.exec(r),o=10;return e?{a:e.length>4?u(e[5]):1,b:parseInt(e[3],o),g:parseInt(e[2],o),r:parseInt(e[1],o)}:void 0}};function S(){let s=new y,r=new v;P(s),P(r);let t=new w;return t.init(),t}var $=S();k()||(window.tsParticles=$);export{A as a,O as b,$ as c};
