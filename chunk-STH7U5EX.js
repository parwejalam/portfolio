import"./chunk-HKUNN5OK.js";import{A as a,D as f,Fa as h,fa as m,v as t,y as l}from"./chunk-6FL7R2MJ.js";import{f as u}from"./chunk-EQDQRRRY.js";var c=class{constructor(){this.enable=!1,this.speed=0,this.decay=0,this.sync=!1}load(e){e&&(e.enable!==void 0&&(this.enable=e.enable),e.speed!==void 0&&(this.speed=a(e.speed)),e.decay!==void 0&&(this.decay=a(e.decay)),e.sync!==void 0&&(this.sync=e.sync))}};var r=class extends h{constructor(){super(),this.animation=new c,this.direction="clockwise",this.enable=!1,this.value=0}load(e){super.load(e),e&&(this.animation.load(e.animation),e.direction!==void 0&&(this.direction=e.direction),e.enable!==void 0&&(this.enable=e.enable))}};var o=1,w=2,g=Math.PI*w,x=360,y=class{constructor(e){this.container=e}getTransformValues(e){let i=e.tilt?.enable&&e.tilt;return{b:i?Math.cos(i.value)*i.cosDirection:void 0,c:i?Math.sin(i.value)*i.sinDirection:void 0}}init(e){let i=e.options.tilt;if(!i)return;e.tilt={enable:i.enable,value:f(l(i.value)),sinDirection:t()>=.5?o:-o,cosDirection:t()>=.5?o:-o,min:0,max:g};let n=i.direction;switch(n==="random"&&(n=Math.floor(t()*w)>0?"counter-clockwise":"clockwise"),n){case"counter-clockwise":case"counterClockwise":e.tilt.status="decreasing";break;case"clockwise":e.tilt.status="increasing";break}let s=e.options.tilt?.animation;s?.enable&&(e.tilt.decay=o-l(s.decay),e.tilt.velocity=l(s.speed)/x*this.container.retina.reduceFactor,s.sync||(e.tilt.velocity*=t()))}isEnabled(e){let i=e.options.tilt?.animation;return!e.destroyed&&!e.spawning&&!!i?.enable}loadOptions(e,...i){e.tilt||(e.tilt=new r);for(let n of i)e.tilt.load(n?.tilt)}update(e,i){return u(this,null,function*(){!this.isEnabled(e)||!e.tilt||(m(e,e.tilt,!1,"none",i),yield Promise.resolve())})}};export{y as TiltUpdater};
