import{c as D}from"./chunk-SNKBHPKW.js";import{b as z}from"./chunk-F7VIIAWX.js";import{A as g,Ea as d,Fa as b,la as m}from"./chunk-FCZ3UZ6C.js";import{a as C}from"./chunk-EQDQRRRY.js";var x=2,p=class extends d{constructor(i,n,s,t){super(i,n,s),this.canvasSize=t,this.canvasSize=C({},t)}contains(i){let{width:n,height:s}=this.canvasSize,{x:t,y:e}=i;return super.contains(i)||super.contains({x:t-n,y:e})||super.contains({x:t-n,y:e-s})||super.contains({x:t,y:e-s})}intersects(i){if(super.intersects(i))return!0;let n=i,s=i,t={x:i.position.x-this.canvasSize.width,y:i.position.y-this.canvasSize.height};if(s.radius!==void 0){let e=new d(t.x,t.y,s.radius*x);return super.intersects(e)}else if(n.size!==void 0){let e=new b(t.x,t.y,n.size.width*x,n.size.height*x);return super.intersects(e)}return!1}};var M=2,v=1,h={x:0,y:0},S=0;function L(f,i,n,s,t){let{dx:e,dy:l,distance:r}=g(f,i);if(!t||r<=n)return r;let c={x:Math.abs(e),y:Math.abs(l)},a={x:Math.min(c.x,s.width-c.x),y:Math.min(c.y,s.height-c.y)};return Math.sqrt(a.x**M+a.y**M)}var O=class extends z{constructor(i){super(i),this._setColor=n=>{if(!n.options.links)return;let s=this.linkContainer,t=n.options.links,e=t.id===void 0?s.particles.linksColor:s.particles.linksColors.get(t.id);if(e)return;let l=t.color;e=m(l,t.blink,t.consent),t.id===void 0?s.particles.linksColor=e:s.particles.linksColors.set(t.id,e)},this.linkContainer=i}clear(){}init(){this.linkContainer.particles.linksColor=void 0,this.linkContainer.particles.linksColors=new Map}interact(i){if(!i.options.links)return;i.links=[];let n=i.getPosition(),s=this.container,t=s.canvas.size;if(n.x<h.x||n.y<h.y||n.x>t.width||n.y>t.height)return;let e=i.options.links,l=e.opacity,r=i.retina.linksDistance??S,c=e.warp,a;c?a=new p(n.x,n.y,r,t):a=new d(n.x,n.y,r);let P=s.particles.quadTree.query(a);for(let o of P){let k=o.options.links;if(i===o||!k?.enable||e.id!==k.id||o.spawning||o.destroyed||!o.links||i.links.some(y=>y.destination===o)||o.links.some(y=>y.destination===i))continue;let u=o.getPosition();if(u.x<h.x||u.y<h.y||u.x>t.width||u.y>t.height)continue;let w=L(n,u,r,t,c&&k.warp);if(w>r)continue;let q=(v-w/r)*l;this._setColor(i),i.links.push({destination:o,opacity:q})}}isEnabled(i){return!!i.options.links?.enable}loadParticlesOptions(i,...n){i.links||(i.links=new D);for(let s of n)i.links.load(s?.links)}reset(){}};export{O as Linker};
