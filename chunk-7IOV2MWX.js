import"./chunk-IVQSTHXJ.js";import{A as g,Fa as d,v as y,x as h,y as u}from"./chunk-RV5XFZSS.js";import"./chunk-KFZQC3P5.js";var l=class extends d{constructor(){super(),this.sync=!1}load(e){e&&(super.load(e),e.sync!==void 0&&(this.sync=e.sync))}};var a=class extends d{constructor(){super(),this.sync=!1}load(e){e&&(super.load(e),e.sync!==void 0&&(this.sync=e.sync))}};var m=class{constructor(){this.count=0,this.delay=new l,this.duration=new a}load(e){e&&(e.count!==void 0&&(this.count=e.count),this.delay.load(e.delay),this.duration.load(e.duration))}};var r=0,O=-1,w=0,R=0;function T(n,e,o){if(!n.life)return;let i=n.life,t=!1;if(n.spawning)if(i.delayTime+=e.value,i.delayTime>=n.life.delay)t=!0,n.spawning=!1,i.delayTime=r,i.time=r;else return;if(i.duration===O||n.spawning||(t?i.time=r:i.time+=e.value,i.time<i.duration))return;if(i.time=r,n.life.count>w&&n.life.count--,n.life.count===w){n.destroy();return}let V=g(R,o.width),F=g(R,o.width);n.position.x=h(V),n.position.y=h(F),n.spawning=!0,i.delayTime=r,i.time=r,n.reset();let c=n.options.life;c&&(i.delay=u(c.delay.value)*1e3,i.duration=u(c.duration.value)*1e3)}var s=0,p=1,x=-1,v=class{constructor(e){this.container=e}init(e){let o=this.container,i=e.options,t=i.life;t&&(e.life={delay:o.retina.reduceFactor?u(t.delay.value)*(t.delay.sync?p:y())/o.retina.reduceFactor*1e3:s,delayTime:s,duration:o.retina.reduceFactor?u(t.duration.value)*(t.duration.sync?p:y())/o.retina.reduceFactor*1e3:s,time:s,count:t.count},e.life.duration<=s&&(e.life.duration=x),e.life.count<=s&&(e.life.count=x),e.life&&(e.spawning=e.life.delay>s))}isEnabled(e){return!e.destroyed}loadOptions(e,...o){e.life||(e.life=new m);for(let i of o)e.life.load(i?.life)}update(e,o){!this.isEnabled(e)||!e.life||T(e,o,this.container.canvas.size)}};export{v as LifeUpdater};
