import{H as g,ia as v,m as f}from"./chunk-FCZ3UZ6C.js";import{a as i,b as u,f as d}from"./chunk-EQDQRRRY.js";var b=0,R=1,I=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d.]+%?\))|currentcolor/gi;function U(e,r,o){let{svgData:n}=e;if(!n)return"";let l=v(r,o);if(n.includes("fill"))return n.replace(I,()=>l);let t=n.indexOf(">");return`${n.substring(b,t)} fill="${l}"${n.substring(t)}`}function L(e){return d(this,null,function*(){return new Promise(r=>{e.loading=!0;let o=new Image;e.element=o,o.addEventListener("load",()=>{e.loading=!1,r()}),o.addEventListener("error",()=>{e.element=void 0,e.error=!0,e.loading=!1,g().error(`${f} loading image: ${e.source}`),r()}),o.src=e.source})})}function $(e){return d(this,null,function*(){if(e.type!=="svg"){yield L(e);return}e.loading=!0;let r=yield fetch(e.source);r.ok?e.svgData=yield r.text():(g().error(`${f} Image not found`),e.error=!0),e.loading=!1})}function h(e,r,o,n){let l=U(e,o,n.opacity?.value??R),t={color:o,gif:r.gif,data:u(i({},e),{svgData:l}),loaded:!1,ratio:r.width/r.height,replaceColor:r.replaceColor,source:r.src};return new Promise(w=>{let x=new Blob([l],{type:"image/svg+xml"}),a=URL||window.URL||window.webkitURL||window,c=a.createObjectURL(x),s=new Image;s.addEventListener("load",()=>{t.loaded=!0,t.element=s,w(t),a.revokeObjectURL(c)});let y=()=>d(null,null,function*(){a.revokeObjectURL(c);let p=u(i({},e),{error:!1,loading:!0});yield L(p),t.loaded=!0,t.element=p.element,w(t)});s.addEventListener("error",()=>void y()),s.src=c})}export{L as a,$ as b,h as c};
