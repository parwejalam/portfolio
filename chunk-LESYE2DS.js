import{a as c,b as g}from"./chunk-6NZNR4LX.js";import"./chunk-F7VIIAWX.js";import{m as a}from"./chunk-FCZ3UZ6C.js";import{f as s}from"./chunk-EQDQRRRY.js";var l=3;function n(e){e.loadImage||(e.loadImage=r=>s(null,null,function*(){if(!r.name&&!r.src)throw new Error(`${a} no image source provided`);if(e.images||(e.images=[]),!e.images.find(o=>o.name===r.name||o.source===r.src))try{let o={gif:r.gif??!1,name:r.name??r.src,source:r.src,type:r.src.substring(r.src.length-l),error:!1,loading:!0,replaceColor:r.replaceColor,ratio:r.width&&r.height?r.width/r.height:void 0};e.images.push(o);let i;if(r.gif){let{loadGifImage:m}=yield import("./chunk-OPH22YA2.js");i=m}else i=r.replaceColor?g:c;yield i(o)}catch{throw new Error(`${a} ${r.name??r.src} not found`)}}))}function u(e,r=!0){return s(this,null,function*(){n(e);let{ImagePreloaderPlugin:o}=yield import("./chunk-QTMZVZ3W.js"),{ImageDrawer:i}=yield import("./chunk-GUHCLYYS.js"),m=new o(e);yield e.addPlugin(m,r),yield e.addShape(["image","images"],new i(e),r)})}export{u as loadImageShape};
