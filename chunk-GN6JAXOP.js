import"./chunk-F7VIIAWX.js";import{A as y,P as v,Q as z,r as c,u as g,w as x,x as B}from"./chunk-FCZ3UZ6C.js";import"./chunk-EQDQRRRY.js";var l=0,d=0;function D(i){if(i.outMode!=="bounce"&&i.outMode!=="split"||i.direction!=="left"&&i.direction!=="right")return;i.bounds.right<d&&i.direction==="left"?i.particle.position.x=i.size+i.offset.x:i.bounds.left>i.canvasSize.width&&i.direction==="right"&&(i.particle.position.x=i.canvasSize.width-i.size-i.offset.x);let o=i.particle.velocity.x,n=!1;if(i.direction==="right"&&i.bounds.right>=i.canvasSize.width&&o>l||i.direction==="left"&&i.bounds.left<=d&&o<l){let r=B(i.particle.options.bounce.horizontal.value);i.particle.velocity.x*=-r,n=!0}if(!n)return;let u=i.offset.x+i.size;i.bounds.right>=i.canvasSize.width&&i.direction==="right"?i.particle.position.x=i.canvasSize.width-u:i.bounds.left<=d&&i.direction==="left"&&(i.particle.position.x=u),i.outMode==="split"&&i.particle.destroy()}function I(i){if(i.outMode!=="bounce"&&i.outMode!=="split"||i.direction!=="bottom"&&i.direction!=="top")return;i.bounds.bottom<d&&i.direction==="top"?i.particle.position.y=i.size+i.offset.y:i.bounds.top>i.canvasSize.height&&i.direction==="bottom"&&(i.particle.position.y=i.canvasSize.height-i.size-i.offset.y);let o=i.particle.velocity.y,n=!1;if(i.direction==="bottom"&&i.bounds.bottom>=i.canvasSize.height&&o>l||i.direction==="top"&&i.bounds.top<=d&&o<l){let r=B(i.particle.options.bounce.vertical.value);i.particle.velocity.y*=-r,n=!0}if(!n)return;let u=i.offset.y+i.size;i.bounds.bottom>=i.canvasSize.height&&i.direction==="bottom"?i.particle.position.y=i.canvasSize.height-u:i.bounds.top<=d&&i.direction==="top"&&(i.particle.position.y=u),i.outMode==="split"&&i.particle.destroy()}var w=class{constructor(o){this.container=o,this.modes=["bounce","split"]}update(o,n,u,r){if(!this.modes.includes(r))return;let f=this.container,s=!1;for(let[,p]of f.plugins)if(p.particleBounce!==void 0&&(s=p.particleBounce(o,u,n)),s)break;if(s)return;let e=o.getPosition(),t=o.offset,h=o.getRadius(),m=z(e,h),b=f.canvas.size;D({particle:o,outMode:r,direction:n,bounds:m,canvasSize:b,offset:t,size:h}),I({particle:o,outMode:r,direction:n,bounds:m,canvasSize:b,offset:t,size:h})}};var P=0,C=class{constructor(o){this.container=o,this.modes=["destroy"]}update(o,n,u,r){if(!this.modes.includes(r))return;let f=this.container;switch(o.outType){case"normal":case"outside":if(v(o.position,f.canvas.size,c.origin,o.getRadius(),n))return;break;case"inside":{let{dx:s,dy:e}=y(o.position,o.moveCenter),{x:t,y:h}=o.velocity;if(t<P&&s>o.moveCenter.radius||h<P&&e>o.moveCenter.radius||t>=P&&s<-o.moveCenter.radius||h>=P&&e<-o.moveCenter.radius)return;break}}f.particles.remove(o,void 0,!0)}};var M=0,V=class{constructor(o){this.container=o,this.modes=["none"]}update(o,n,u,r){if(!this.modes.includes(r)||((o.options.move.distance.horizontal&&(n==="left"||n==="right"))??(o.options.move.distance.vertical&&(n==="top"||n==="bottom"))))return;let f=o.options.move.gravity,s=this.container,e=s.canvas.size,t=o.getRadius();if(f.enable){let h=o.position;(!f.inverse&&h.y>e.height+t&&n==="bottom"||f.inverse&&h.y<-t&&n==="top")&&s.particles.remove(o)}else{if(o.velocity.y>M&&o.position.y<=e.height+t||o.velocity.y<M&&o.position.y>=-t||o.velocity.x>M&&o.position.x<=e.width+t||o.velocity.x<M&&o.position.x>=-t)return;v(o.position,s.canvas.size,c.origin,t,n)||s.particles.remove(o)}}};var R=0,S=0,k=class{constructor(o){this.container=o,this.modes=["out"]}update(o,n,u,r){if(!this.modes.includes(r))return;let f=this.container;switch(o.outType){case"inside":{let{x:s,y:e}=o.velocity,t=c.origin;t.length=o.moveCenter.radius,t.angle=o.velocity.angle+Math.PI,t.addTo(c.create(o.moveCenter));let{dx:h,dy:m}=y(o.position,t);if(s<=R&&h>=S||e<=R&&m>=S||s>=R&&h<=S||e>=R&&m<=S)return;o.position.x=Math.floor(x({min:0,max:f.canvas.size.width})),o.position.y=Math.floor(x({min:0,max:f.canvas.size.height}));let{dx:b,dy:p}=y(o.position,o.moveCenter);o.direction=Math.atan2(-p,-b),o.velocity.angle=o.direction;break}default:{if(v(o.position,f.canvas.size,c.origin,o.getRadius(),n))return;switch(o.outType){case"outside":{o.position.x=Math.floor(x({min:-o.moveCenter.radius,max:o.moveCenter.radius}))+o.moveCenter.x,o.position.y=Math.floor(x({min:-o.moveCenter.radius,max:o.moveCenter.radius}))+o.moveCenter.y;let{dx:s,dy:e}=y(o.position,o.moveCenter);o.moveCenter.radius&&(o.direction=Math.atan2(e,s),o.velocity.angle=o.direction);break}case"normal":{let s=o.options.move.warp,e=f.canvas.size,t={bottom:e.height+o.getRadius()+o.offset.y,left:-o.getRadius()-o.offset.x,right:e.width+o.getRadius()+o.offset.x,top:-o.getRadius()-o.offset.y},h=o.getRadius(),m=z(o.position,h);n==="right"&&m.left>e.width+o.offset.x?(o.position.x=t.left,o.initialPosition.x=o.position.x,s||(o.position.y=g()*e.height,o.initialPosition.y=o.position.y)):n==="left"&&m.right<-o.offset.x&&(o.position.x=t.right,o.initialPosition.x=o.position.x,s||(o.position.y=g()*e.height,o.initialPosition.y=o.position.y)),n==="bottom"&&m.top>e.height+o.offset.y?(s||(o.position.x=g()*e.width,o.initialPosition.x=o.position.x),o.position.y=t.top,o.initialPosition.y=o.position.y):n==="top"&&m.bottom<-o.offset.y&&(s||(o.position.x=g()*e.width,o.initialPosition.x=o.position.x),o.position.y=t.bottom,o.initialPosition.y=o.position.y);break}}break}}}};var _=(i,o)=>i.default===o||i.bottom===o||i.left===o||i.right===o||i.top===o,O=class{constructor(o){this._updateOutMode=(n,u,r,f)=>{for(let s of this.updaters)s.update(n,f,u,r)},this.container=o,this.updaters=[]}init(o){this.updaters=[];let n=o.options.move.outModes;_(n,"bounce")?this.updaters.push(new w(this.container)):_(n,"out")?this.updaters.push(new k(this.container)):_(n,"destroy")?this.updaters.push(new C(this.container)):_(n,"none")&&this.updaters.push(new V(this.container))}isEnabled(o){return!o.destroyed&&!o.spawning}update(o,n){let u=o.options.move.outModes;this._updateOutMode(o,n,u.bottom??u.default,"bottom"),this._updateOutMode(o,n,u.left??u.default,"left"),this._updateOutMode(o,n,u.right??u.default,"right"),this._updateOutMode(o,n,u.top??u.default,"top")}};export{O as OutOfCanvasUpdater};
